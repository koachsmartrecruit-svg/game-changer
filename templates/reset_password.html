{% extends "base.html" %}

{% block content %}
<div class="container py-5">
  <div class="row g-0 align-items-stretch auth-shell">
    <div class="col-lg-6 d-flex align-items-center justify-content-center mx-auto">
      <div class="auth-card p-5 w-100" style="max-width: 480px;">
        <div class="text-center mb-4">
          <h1 class="serif-font mb-2">Reset Password</h1>
          <p class="text-muted small">
            Choose a new password for your GameChanger account.
          </p>
        </div>

        <form method="POST">
          <div class="form-floating mb-3">
            <div class="input-group">
              <input type="password" name="password"
                     class="form-control auth-input rounded-start-3"
                     id="newPass" placeholder="New password" required style="height: 58px;">
              <button class="btn auth-input-addon rounded-end-3" type="button"
                      onclick="togglePassword('newPass', this)" style="height: 58px;">
                <i class="bi bi-eye-slash-fill text-muted"></i>
              </button>
            </div>
            <label for="newPass">New password</label>
          </div>

          <div class="form-floating mb-4">
            <div class="input-group">
              <input type="password" name="confirm_password"
                     class="form-control auth-input rounded-start-3"
                     id="confirmPass" placeholder="Confirm password" required style="height: 58px;">
              <button class="btn auth-input-addon rounded-end-3" type="button"
                      onclick="togglePassword('confirmPass', this)" style="height: 58px;">
                <i class="bi bi-eye-slash-fill text-muted"></i>
              </button>
            </div>
            <label for="confirmPass">Confirm password</label>
          </div>

          <button type="submit" class="btn btn-primary w-100 rounded-pill">
            Update Password
          </button>

          <div class="text-center mt-3">
            <a href="{{ url_for('login') }}" class="auth-link small fw-bold">
              Back to Sign In
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  function togglePassword(inputId, btn) {
    const input = document.getElementById(inputId);
    const icon = btn.querySelector("i");
    if (!input) return;
    if (input.type === "password") {
      input.type = "text";
      if (icon) icon.classList.replace("bi-eye-slash-fill", "bi-eye-fill");
    } else {
      input.type = "password";
      if (icon) icon.classList.replace("bi-eye-fill", "bi-eye-slash-fill");
    }
  }
</script>
{% endblock %}
